-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘  MAIN.LUA - BLOX FRUITS AUTO FARM V2.5                    â•‘
-- â•‘  âœ… Raw URL Ä‘Ãºng format                                   â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("ğŸ”„ Loading Blox Fruits Auto Farm V2.5...")
print("ğŸ“¦ Loading modules from GitHub...")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- RAW URLs
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local RAW_BASE = "https://raw.githubusercontent.com/longgamer998-code/SourceBloxFruit/main/"
local CONFIG_URL = RAW_BASE .. "CONFIG.LUA"
local CORE_URL = RAW_BASE ..  "CORE.LUA"
local GUI_URL = RAW_BASE .. "GUI.LUA"

print("ğŸ“ Base URL: " .. RAW_BASE)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- LOAD CONFIG
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("\nğŸ”„ [1/3] Loading CONFIG...")
print("URL: " .. CONFIG_URL)

local Config
local configSuccess, configError = pcall(function()
    local source = game:HttpGet(CONFIG_URL)
    print("âœ… Downloaded CONFIG (" .. #source .. " bytes)")
    Config = loadstring(source)()
end)

if not configSuccess then
    warn("âŒ Failed to load CONFIG!")
    warn("Error: " .. tostring(configError))
    warn("\nğŸ“ Please verify:")
    warn("   1. CONFIG.LUA exists at: " .. CONFIG_URL)
    warn("   2. File ends with 'return Config'")
    warn("   3. No syntax errors")
    return
end

if not Config then
    warn("âŒ CONFIG is nil after loading!")
    return
end

print("âœ… CONFIG loaded successfully")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- LOAD CORE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("\nğŸ”„ [2/3] Loading CORE...")
print("URL: " .. CORE_URL)

local Core
local coreSuccess, coreError = pcall(function()
    local source = game:HttpGet(CORE_URL)
    print("âœ… Downloaded CORE (" .. #source .. " bytes)")
    Core = loadstring(source)()
end)

if not coreSuccess then
    warn("âŒ Failed to load CORE!")
    warn("Error: " .. tostring(coreError))
    warn("\nğŸ“ Please verify:")
    warn("   1. CORE.LUA exists at: " ..  CORE_URL)
    warn("   2. File ends with 'return Core'")
    warn("   3. No syntax errors")
    return
end

if not Core then
    warn("âŒ CORE is nil after loading!")
    return
end

print("âœ… CORE loaded successfully")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- INIT CONSOLE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("\nğŸ”„ Initializing console...")
Core.initConsole(Config)
print("âœ… Console ready")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- PLAYER INFO
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local player = game. Players.LocalPlayer

print("\n" .. string.rep("=", 60))
print("ğŸ‘¤ Player:  " .. player.Name)

local levelSuccess, level = pcall(function()
    return player. Data.Level. Value
end)
print("â­ Level: " .. (levelSuccess and tostring(level) or "?"))

local beliSuccess, beli = pcall(function()
    return player.Data.Beli.Value
end)
print("ğŸ’° Beli: " .. (beliSuccess and tostring(beli) or "?"))

print(string.rep("=", 60))

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- LOAD GUI
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("\nğŸ”„ [3/3] Loading GUI...")
print("URL: " .. GUI_URL)

local GUI
local guiSuccess, guiError = pcall(function()
    local source = game:HttpGet(GUI_URL)
    print("âœ… Downloaded GUI (" .. #source .. " bytes)")
    GUI = loadstring(source)()
end)

if not guiSuccess then
    warn("âŒ Failed to load GUI!")
    warn("Error: " .. tostring(guiError))
    warn("\nâš ï¸ Using fallback mode...")
    
    GUI = {}
    function GUI.create(Config, Core)
        warn("âš ï¸ GUI not available - use manual commands:")
        warn("   BloxFruitsAutoFarm.Start()")
        warn("   BloxFruitsAutoFarm. Stop()")
        warn("   BloxFruitsAutoFarm.Status()")
    end
end

if not GUI then
    warn("âŒ GUI is nil after loading!")
    GUI = {}
    function GUI.create() end
end

print("âœ… GUI loaded")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- CREATE GUI
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("\nğŸ¨ Creating GUI...")

local createSuccess, createError = pcall(function()
    GUI.create(Config, Core)
end)

if not createSuccess then
    warn("âŒ Failed to create GUI!")
    warn("Error: " .. tostring(createError))
    warn("âš ï¸ You can still use manual commands")
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SUCCESS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("\n" .. string.rep("=", 60))
print("âœ… SCRIPT LOADED SUCCESSFULLY!")
print(string.rep("=", 60))
print("ğŸ“– How to use:")
print("  1. Open GUI (if loaded)")
print("  2. Select weapon")
print("  3. Toggle 'Auto Farm' to start")
print("  4. Check Console tab for stats")
print(string.rep("=", 60))
print("ğŸŒ GitHub: longgamer998-code/SourceBloxFruit")
print("ğŸ“… " .. os.date("%Y-%m-%d %H:%M:%S"))
print("âœ¨ Ready to farm!")
print(string.rep("=", 60))

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- EXPOSE GLOBALS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

getgenv().BloxFruitsAutoFarm = {
    Config = Config,
    Core = Core,
    GUI = GUI,
    
    Start = function()
        Config.Settings.Enabled = true
        local success = Core.startAutoFarm(Config)
        if success then
            print("âœ… Auto Farm started!")
        else
            warn("âŒ Failed to start Auto Farm")
        end
        return success
    end,
    
    Stop = function()
        Config.Settings.Enabled = false
        Core.stopAutoFarm()
        print("â›” Auto Farm stopped")
    end,
    
    Status = function()
        print("\n" .. string.rep("=", 40))
        print("ğŸ“Š AUTO FARM STATUS")
        print(string.rep("=", 40))
        print("Status: " .. (Core.isAutoFarmRunning() and "ğŸŸ¢ RUNNING" or "ğŸ”´ STOPPED"))
        print("Thread: " .. Core.getAutoFarmStatus())
        print("Enabled: " .. tostring(Config.Settings.Enabled))
        print("Level: " .. tostring(Core. getPlayerLevel()))
        print("Weapon: " .. Config.Settings.SelectedWeapon)
        print("Quest: " .. Config.Settings.CurrentQuest)
        print("Mobs Killed: " .. tostring(Config.Settings.MobsKilled))
        print("Quests Done: " .. tostring(Config. Settings.QuestsCompleted))
        print(string.rep("=", 40) .. "\n")
    end,
    
    DebugQuests = function()
        print("\n" .. string.rep("=", 40))
        print("ğŸ“‹ AVAILABLE QUESTS")
        print(string.rep("=", 40))
        local count = 0
        for location, quests in pairs(Config.QuestData) do
            print("\nğŸ“ " .. location ..  ":")
            for i, quest in ipairs(quests) do
                print("  " .. i .. ".  " .. quest.Name ..  " (Lvl " .. quest.LevelReq .. ")")
                count = count + 1
            end
        end
        print("\nTotal:  " .. count .. " quests")
        print(string.rep("=", 40) .. "\n")
    end,
    
    TestLoad = function()
        print("\nğŸ” TESTING MODULE LOAD...")
        print("Config type: " .. type(Config))
        print("Core type: " ..  type(Core))
        print("GUI type: " .. type(GUI))
        print("\nâœ… All modules loaded!")
    end
}

print("\nğŸ“Œ Manual Commands:")
print("   BloxFruitsAutoFarm. Start()        -- Start farming")
print("   BloxFruitsAutoFarm.Stop()         -- Stop farming")
print("   BloxFruitsAutoFarm.Status()       -- Show status")
print("   BloxFruitsAutoFarm. DebugQuests()  -- Show all quests")
print("   BloxFruitsAutoFarm. TestLoad()     -- Test modules\n")
